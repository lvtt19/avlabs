const uploadform=document.querySelector(".uploadform"),fileInput=document.querySelector(".upload-model__upload-file-input"),progressArea=document.querySelector(".upload-model__progress-area"),uploadedArea=document.querySelector(".upload-model__uploaded-area");function uploadFile(e){let a=new XMLHttpRequest;a.open("POST","php/upload.php"),a.upload.addEventListener("progress",(({loaded:a,total:l})=>{let s,r=Math.floor(a/l*100),o=Math.floor(l/1e3);s=o<1024?o+" KB":(a/1048576).toFixed(2)+" MB";let n=`<ul>\n                              <li class="progress-area__row">\n                                 <img src="/avlabs/img/icons/file.png" alt="file">\n                                 <div class="progress-area__content">\n                                    <div class="progress-area__details">\n                                       <span class="progress-area__name">${e} ~ Uploading</span>\n                                       <span class="progress-area__percent">${r} %</span>\n                                    </div>\n                                    <div class="progress-area__progress-bar">\n                                       <div class="progress-area__progress" style="width: ${r}%"></div>\n                                    </div>\n                                 </div>\n                              </li>\n                           </ul>`;if(uploadedArea.classList.add("onprogress"),progressArea.innerHTML=n,a==l){progressArea.innerHTML="";let a=`<ul>\n                              <li class="uploaded-area__row">\n                                 <img src="/avlabs/img/icons/file.png" alt="file">\n                                 <div class="uploaded-area__content">\n                                    <div class="uploaded-area__details">\n                                       <span class="uploaded-area__name">${e} ~ Uploaded</span>\n                                       <span class="uploaded-area__size">${s}</span>\n                                    </div>\n                                 </div>\n                              </li>\n                           </ul>`;uploadedArea.classList.remove("onprogress"),uploadedArea.insertAdjacentHTML("afterbegin",a)}}));let l=new FormData(uploadform);a.send(l)}function toggleUploadfile(){for(var e=document.querySelectorAll('#uploadfile input[type="file"]'),a=0;a<e.length;a++)e[a].disabled=!e[a].disabled}uploadform.addEventListener("click",(()=>{fileInput.click()})),fileInput.onchange=({target:e})=>{let a=e.files[0];if(a){let e=a.name;if(e.length>=16){let a=e.split(".");e=a[0].substring(0,17)+"... ."+a[1]}uploadFile(e)}};